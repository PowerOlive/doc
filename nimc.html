<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nimrod. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>

<!-- Google fonts -->
<link href='http://fonts.googleapis.com/css?family=Raleway:400,600,900' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'>

<!-- CSS -->
<title>Nim 编译器用户指南</title>
<style type="text/css" >
/*
Stylesheet for use with Docutils/rst2html.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.

Modified from Chad Skeeters' rst2html-style
https://bitbucket.org/cskeeters/rst2html-style/

Modified by Boyd Greenfield
*/
/* SCSS variables */
/* Text weights */
/* Body colors */
/* Text colors */
/* Link colors */
/* Syntax highlighting colors */
/* Pct changes */
/* Mixins */
/* Body/layout */
html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%; }

/* Where we want fancier font if available */
h1, h2, h3, h4, h5, h6, p.module-desc, table.docinfo + blockquote p, table.docinfo blockquote p, h1 + blockquote p {
  font-family: "Raleway", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif !important; }

h1.title {
  font-weight: 900; }

body {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: 400;
  font-size: 14px;
  line-height: 20px;
  color: #2d2d2d;
  background-color: rgba(252, 248, 244, 0.75); }

/* Skeleton grid */
.container {
  position: relative;
  width: 100%;
  max-width: 960px;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box; }

.column,
.columns {
  width: 100%;
  float: left;
  box-sizing: border-box; }

/* For devices larger than 400px */
@media (min-width: 400px) {
  .container {
    width: 100%;
    padding: 0; } }
/* For devices larger than 650px */
@media (min-width: 650px) {
  .container {
    width: 100%; }

  .column,
  .columns {
    margin-left: 4%; }

  .column:first-child,
  .columns:first-child {
    margin-left: 0; }

  .one.column,
  .one.columns {
    width: 4.66666666667%; }

  .two.columns {
    width: 13.3333333333%; }

  .three.columns {
    width: 22%; }

  .four.columns {
    width: 30.6666666667%; }

  .five.columns {
    width: 39.3333333333%; }

  .six.columns {
    width: 48%; }

  .seven.columns {
    width: 56.6666666667%; }

  .eight.columns {
    width: 65.3333333333%; }

  .nine.columns {
    width: 74.0%; }

  .ten.columns {
    width: 82.6666666667%; }

  .eleven.columns {
    width: 91.3333333333%; }

  .twelve.columns {
    width: 100%;
    margin-left: 0; }

  .one-third.column {
    width: 30.6666666667%; }

  .two-thirds.column {
    width: 65.3333333333%; } }
/* Customer Overrides */
.footer {
  text-align: center;
  color: #969696;
  padding-top: 10%; }

p.module-desc {
  font-size: 1.1em;
  color: #666666; }

a.link-seesrc {
  color: #aec7d2;
  font-style: italic; }

a.link-seesrc:hover {
  color: #6c9aae; }

#toc-list {
  word-wrap: break-word; }

ul.simple-toc {
  list-style: none; }

ul.simple-toc a.reference-toplevel {
  font-weight: bold;
  color: #0077b3; }

ul.simple-toc-section {
  list-style-type: circle;
  color: #6c9aae; }

ul.simple-toc-section a.reference {
  color: #0077b3; }

cite {
  font-style: italic !important; }

dt > pre {
  border-color: rgba(0, 0, 0, 0.15);
  background-color: transparent;
  margin: 15px 0px 5px; }

dd > pre {
  border-color: rgba(0, 0, 0, 0.1);
  background-color: whitesmoke;
  margin-top: 8px; }

.item > dd {
  margin-left: 10px;
  margin-bottom: 30px; }

/* Nim line-numbered tables */
.line-nums-table {
  width: 100%;
  table-layout: fixed; }

table.line-nums-table {
  border-radius: 4px;
  border: 1px solid #cccccc;
  background-color: whitesmoke;
  border-collapse: separate;
  margin-top: 15px;
  margin-bottom: 25px; }

.line-nums-table tbody {
  border: none; }

.line-nums-table td pre {
  border: none;
  background-color: transparent; }

.line-nums-table td.blob-line-nums {
  width: 28px; }

.line-nums-table td.blob-line-nums pre {
  color: #b0b0b0;
  -webkit-filter: opacity(75%);
  text-align: right;
  border-color: transparent;
  background-color: transparent;
  padding-left: 0px;
  margin-left: 0px;
  padding-right: 0px;
  margin-right: 0px; }

/* Docgen styles */
/* Links */
a {
  color: #0077b3;
  text-decoration: none; }

a:hover,
a:focus {
  color: #00334d;
  text-decoration: underline; }

a:visited {
  color: #00334d; }

a:focus {
  outline: thin dotted #2d2d2d;
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px; }

a:hover,
a:active {
  outline: 0; }

sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline; }

sup {
  top: -0.5em; }

sub {
  bottom: -0.25em; }

img {
  width: auto;
  height: auto;
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic; }

@media print {
  * {
    color: black !important;
    text-shadow: none !important;
    background: transparent !important;
    box-shadow: none !important; }

  a,
  a:visited {
    text-decoration: underline; }

  a[href]:after {
    content: " (" attr(href) ")"; }

  abbr[title]:after {
    content: " (" attr(title) ")"; }

  .ir a:after,
  a[href^="javascript:"]:after,
  a[href^="#"]:after {
    content: ""; }

  pre,
  blockquote {
    border: 1px solid #999;
    page-break-inside: avoid; }

  thead {
    display: table-header-group; }

  tr,
  img {
    page-break-inside: avoid; }

  img {
    max-width: 100% !important; }

  @page {
    margin: 0.5cm; }

  h1 {
    page-break-before: always; }

  h1.title {
    page-break-before: avoid; }

  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3; }

  h2,
  h3 {
    page-break-after: avoid; } }
.img-rounded {
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.img-polaroid {
  padding: 4px;
  background-color: rgba(252, 248, 244, 0.75);
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }

p {
  margin: 0 0 12px; }

small {
  font-size: 85%; }

strong {
  font-weight: 600; }

em {
  font-style: italic; }

cite {
  font-style: normal; }

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: 600;
  line-height: 20px;
  color: inherit;
  text-rendering: optimizelegibility; }

h1 {
  font-size: 2em;
  padding-bottom: .15em;
  border-bottom: 1px solid #aaaaaa;
  margin-top: 1.0em;
  line-height: 1.2em; }

h1.title {
  padding-bottom: 1em;
  border-bottom: 0px;
  font-size: 2.75em; }

h2 {
  font-size: 1.5em;
  margin-top: 1.5em; }

h3 {
  font-size: 1.3em;
  font-style: italic;
  margin-top: 0.75em; }

h4 {
  font-size: 1.3em;
  margin-top: 0.5em; }

h5 {
  font-size: 1.2em;
  margin-top: 0.25em; }

h6 {
  font-size: 1.1em; }

ul,
ol {
  padding: 0;
  margin: 0 0 0px 15px; }

ul ul,
ul ol,
ol ol,
ol ul {
  margin-bottom: 0; }

li {
  line-height: 20px; }

dl {
  margin-bottom: 20px; }

dt,
dd {
  line-height: 20px; }

dt {
  font-weight: bold; }

dd {
  margin-left: 10px;
  margin-bottom: 26px; }

hr {
  margin: 20px 0;
  border: 0;
  border-top: 1px solid #eeeeee;
  border-bottom: 1px solid #ffffff; }

abbr[title],
abbr[data-original-title] {
  cursor: help;
  border-bottom: 1px dotted #999999; }

abbr.initialism {
  font-size: 90%;
  text-transform: uppercase; }

blockquote {
  padding: 0 0 0 15px;
  margin: 0 0 20px;
  border-left: 5px solid #EFEBE0; }

table.docinfo + blockquote, table.docinfo blockquote, h1 + blockquote {
  border-left: 5px solid #c9c9c9;
}

table.docinfo + blockquote p, table.docinfo blockquote p, h1 + blockquote p {
  margin-bottom: 0;
  font-size: 15px;
  font-weight: 200;
  line-height: 1.5;
  font-style: italic; }

q:before,
q:after,
blockquote:before,
blockquote:after {
  content: ""; }

address {
  display: block;
  margin-bottom: 20px;
  font-style: normal;
  line-height: 20px; }

code,
pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  padding: 0 3px 2px;
  font-weight: 500;
  font-size: 12px;
  color: #444444;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px; }

.pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  font-weight: 600;
  /*color: #504da6;*/
}

code {
  padding: 2px 4px;
  color: #444444;
  white-space: nowrap;
  background-color: white;
  border: 1px solid #777777; }

pre {
  display: inline-block;
  box-sizing: border-box;
  min-width: calc(100% - 19.5px);
  padding: 9.5px;
  margin: 0 10px 0px 10px;
  font-size: 14px;
  line-height: 20px;
  white-space: pre !important;
  overflow-y: hidden;
  overflow-x: visible;
  background-color: whitesmoke;
  border: 1px solid #cccccc;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px; }

pre.prettyprint {
  margin-bottom: 20px; }

pre code {
  padding: 0;
  color: inherit;
  white-space: pre;
  overflow-x: visible;
  background-color: transparent;
  border: 0; }

.pre-scrollable {
  max-height: 340px;
  overflow-y: scroll; }

table {
  max-width: 100%;
  background-color: transparent;
  border-collapse: collapse;
  border-spacing: 0; }

table th, table td {
  padding: 0px 8px 0px;
}

.table {
  width: 100%;
  margin-bottom: 20px; }

.table th,
.table td {
  padding: 8px;
  line-height: 20px;
  text-align: left;
  vertical-align: top;
  border-top: 1px solid #444444; }

.table th {
  font-weight: bold; }

.table thead th {
  vertical-align: bottom; }

.table caption + thead tr:first-child th,
.table caption + thead tr:first-child td,
.table colgroup + thead tr:first-child th,
.table colgroup + thead tr:first-child td,
.table thead:first-child tr:first-child th,
.table thead:first-child tr:first-child td {
  border-top: 0; }

.table tbody + tbody {
  border-top: 2px solid #444444; }

.table .table {
  background-color: rgba(252, 248, 244, 0.75); }

.table-condensed th,
.table-condensed td {
  padding: 4px 5px; }

.table-bordered {
  border: 1px solid #444444;
  border-collapse: separate;
  *border-collapse: collapse;
  border-left: 0;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px; }

.table-bordered th,
.table-bordered td {
  border-left: 1px solid #444444; }

.table-bordered caption + thead tr:first-child th,
.table-bordered caption + tbody tr:first-child th,
.table-bordered caption + tbody tr:first-child td,
.table-bordered colgroup + thead tr:first-child th,
.table-bordered colgroup + tbody tr:first-child th,
.table-bordered colgroup + tbody tr:first-child td,
.table-bordered thead:first-child tr:first-child th,
.table-bordered tbody:first-child tr:first-child th,
.table-bordered tbody:first-child tr:first-child td {
  border-top: 0; }

.table-bordered thead:first-child tr:first-child > th:first-child,
.table-bordered tbody:first-child tr:first-child > td:first-child,
.table-bordered tbody:first-child tr:first-child > th:first-child {
  -webkit-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px; }

.table-bordered thead:first-child tr:first-child > th:last-child,
.table-bordered tbody:first-child tr:first-child > td:last-child,
.table-bordered tbody:first-child tr:first-child > th:last-child {
  -webkit-border-top-right-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px; }

.table-bordered thead:last-child tr:last-child > th:first-child,
.table-bordered tbody:last-child tr:last-child > td:first-child,
.table-bordered tbody:last-child tr:last-child > th:first-child,
.table-bordered tfoot:last-child tr:last-child > td:first-child,
.table-bordered tfoot:last-child tr:last-child > th:first-child {
  -webkit-border-bottom-left-radius: 4px;
  border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px; }

.table-bordered thead:last-child tr:last-child > th:last-child,
.table-bordered tbody:last-child tr:last-child > td:last-child,
.table-bordered tbody:last-child tr:last-child > th:last-child,
.table-bordered tfoot:last-child tr:last-child > td:last-child,
.table-bordered tfoot:last-child tr:last-child > th:last-child {
  -webkit-border-bottom-right-radius: 4px;
  border-bottom-right-radius: 4px;
  -moz-border-radius-bottomright: 4px; }

.table-bordered tfoot + tbody:last-child tr:last-child td:first-child {
  -webkit-border-bottom-left-radius: 0;
  border-bottom-left-radius: 0;
  -moz-border-radius-bottomleft: 0; }

.table-bordered tfoot + tbody:last-child tr:last-child td:last-child {
  -webkit-border-bottom-right-radius: 0;
  border-bottom-right-radius: 0;
  -moz-border-radius-bottomright: 0; }

.table-bordered caption + thead tr:first-child th:first-child,
.table-bordered caption + tbody tr:first-child td:first-child,
.table-bordered colgroup + thead tr:first-child th:first-child,
.table-bordered colgroup + tbody tr:first-child td:first-child {
  -webkit-border-top-left-radius: 4px;
  border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px; }

.table-bordered caption + thead tr:first-child th:last-child,
.table-bordered caption + tbody tr:first-child td:last-child,
.table-bordered colgroup + thead tr:first-child th:last-child,
.table-bordered colgroup + tbody tr:first-child td:last-child {
  -webkit-border-top-right-radius: 4px;
  border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px; }

table.docutils th {
  background-color: #e8e8e8; }

table.docutils tr:hover {
  background-color: whitesmoke; }

.table-striped tbody > tr:nth-child(odd) > td,
.table-striped tbody > tr:nth-child(odd) > th {
  background-color: rgba(252, 248, 244, 0.75); }

.table-hover tbody tr:hover > td,
.table-hover tbody tr:hover > th {
  background-color: rgba(241, 222, 204, 0.75); }

table td[class*="span"],
table th[class*="span"],
.row-fluid table td[class*="span"],
.row-fluid table th[class*="span"] {
  display: table-cell;
  float: none;
  margin-left: 0; }

.hero-unit {
  padding: 60px;
  margin-bottom: 30px;
  font-size: 18px;
  font-weight: 200;
  line-height: 30px;
  color: inherit;
  background-color: rgba(230, 197, 164, 0.75);
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.hero-unit h1 {
  margin-bottom: 0;
  font-size: 60px;
  line-height: 1;
  letter-spacing: -1px;
  color: inherit; }

.hero-unit li {
  line-height: 30px; }

/* rst2html default used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0; }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 !important; }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 !important; }

.last, .with-subtitle {
  margin-bottom: 0 !important; }

.hidden {
  display: none; }

a.toc-backref {
  text-decoration: none;
  color: #444444; }

blockquote.epigraph {
  margin: 2em 5em; }

dl.docutils dd {
  margin-bottom: 0.5em; }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden; }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/
div.abstract {
  margin: 2em 5em; }

div.abstract p.topic-title {
  font-weight: bold;
  text-align: center; }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em;
  border: medium outset;
  padding: 1em; }

div.note, div.warning {
  margin: 1.5em 0px;
  border: none; }

div.note p.admonition-title,
div.warning p.admonition-title {
  display: none; }

/* Clearfix
 * http://css-tricks.com/snippets/css/clear-fix/
 */
div.note:after,
div.warning:after {
  content: "";
  display: table;
  clear: both; }

div.note p:before,
div.warning p:before {
  display: block;
  float: left;
  font-size: 4em;
  line-height: 1em;
  margin-right: 20px;
  margin-left: 0em;
  margin-top: -10px;
  content: '\0270D';
  /*handwriting*/ }

div.warning p:before {
  content: '\026A0';
  /*warning*/ }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold;
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif; }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: #b30000;
  font-weight: bold;
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif; }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic; }

div.dedication p.topic-title {
  font-weight: bold;
  font-style: normal; }

div.figure {
  margin-left: 2em;
  margin-right: 2em; }

div.footer, div.header {
  clear: both;
  font-size: smaller; }

div.line-block {
  display: block;
  margin-top: 1em;
  margin-bottom: 1em; }

div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 1.5em; }

div.sidebar {
  margin: 0 0 0.5em 1em;
  border: medium outset;
  padding: 1em;
  background-color: rgba(252, 248, 244, 0.75);
  width: 40%;
  float: right;
  clear: right; }

div.sidebar p.rubric {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-size: medium; }

div.system-messages {
  margin: 5em; }

div.system-messages h1 {
  color: #b30000; }

div.system-message {
  border: medium outset;
  padding: 1em; }

div.system-message p.system-message-title {
  color: #b30000;
  font-weight: bold; }

div.topic {
  margin: 2em; }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em; }

h1.title {
  text-align: center; }

h2.subtitle {
  text-align: center; }

hr.docutils {
  width: 75%; }

img.align-left, .figure.align-left, object.align-left {
  clear: left;
  float: left;
  margin-right: 1em; }

img.align-right, .figure.align-right, object.align-right {
  clear: right;
  float: right;
  margin-left: 1em; }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto; }

.align-left {
  text-align: left; }

.align-center {
  clear: both;
  text-align: center; }

.align-right {
  text-align: right; }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit; }

/* div.align-center * { */
/*   text-align: left } */
ol.simple, ul.simple {
  margin-bottom: 1em; }

ol.arabic {
  list-style: decimal; }

ol.loweralpha {
  list-style: lower-alpha; }

ol.upperalpha {
  list-style: upper-alpha; }

ol.lowerroman {
  list-style: lower-roman; }

ol.upperroman {
  list-style: upper-roman; }

p.attribution {
  text-align: right;
  margin-left: 50%; }

p.caption {
  font-style: italic; }

p.credits {
  font-style: italic;
  font-size: smaller; }

p.label {
  white-space: nowrap; }

p.rubric {
  font-weight: bold;
  font-size: larger;
  color: maroon;
  text-align: center; }

p.sidebar-title {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: bold;
  font-size: larger; }

p.sidebar-subtitle {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: bold; }

p.topic-title {
  font-weight: bold; }

pre.address {
  margin-bottom: 0;
  margin-top: 0;
  font: inherit; }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em;
  margin-right: 2em; }

pre.code .ln {
  color: grey; }

/* line numbers */
pre.code, code {
  background-color: #eeeeee; }

pre.code .comment, code .comment {
  color: #5c6576; }

pre.code .keyword, code .keyword {
  color: #3B0D06;
  font-weight: bold; }

pre.code .literal.string, code .literal.string {
  color: #0c5404; }

pre.code .name.builtin, code .name.builtin {
  color: #352b84; }

pre.code .deleted, code .deleted {
  background-color: #DEB0A1; }

pre.code .inserted, code .inserted {
  background-color: #A3D289; }

span.classifier {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-style: oblique; }

span.classifier-delimiter {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif;
  font-weight: bold; }

span.interpreted {
  font-family: "Helvetica Neue", "HelveticaNeue", "Raleway", Helvetica, Arial, sans-serif; }

span.option {
  white-space: nowrap; }

span.pre {
  white-space: pre; }

span.problematic {
  color: #b30000; }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80%; }

table.citation {
  border-left: solid 1px #666666;
  margin-left: 1px; }

table.docinfo {
  margin: 0em;
  margin-top: 2em;
  margin-bottom: 2em;
  font-family: "Raleway", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif !important;
  color: #444444; }

table.docutils {
  margin-top: 0.5em;
  margin-bottom: 0.5em; }

table.footnote {
  border-left: solid 1px #2d2d2d;
  margin-left: 1px; }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em;
  padding-right: 0.5em;
  vertical-align: top; }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: 700;
  text-align: left;
  white-space: nowrap;
  padding-left: 0; }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100%; }

ul.auto-toc {
  list-style-type: none; }

span.DecNumber {
  color: #252dbe; }

span.BinNumber {
  color: #252dbe; }

span.HexNumber {
  color: #252dbe; }

span.OctNumber {
  color: #252dbe; }

span.FloatNumber {
  color: #252dbe; }

span.Identifier {
  color: #3b3b3b; }

span.Keyword {
  font-weight: 600;
  color: #5e8f60; }

span.StringLit {
  color: #a4255b; }

span.LongStringLit {
  color: #a4255b; }

span.CharLit {
  color: #a4255b; }

span.EscapeSequence {
  color: black; }

span.Operator {
  color: black; }

span.Punctuation {
  color: black; }

span.Comment, span.LongComment {
  font-style: italic;
  font-weight: 400;
  color: #484a86; }

span.RegularExpression {
  color: darkviolet; }

span.TagStart {
  color: darkviolet; }

span.TagEnd {
  color: darkviolet; }

span.Key {
  color: #252dbe; }

span.Value {
  color: #252dbe; }

span.RawData {
  color: #a4255b; }

span.Assembler {
  color: #252dbe; }

span.Preprocessor {
  color: #252dbe; }

span.Directive {
  color: #252dbe; }

span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference,
span.Other {
  color: black; }

/* Pop type, const, proc, and iterator defs in nim def blocks */
dt pre > span.Identifier, dt pre > span.Operator {
  color: #155da4;
  font-weight: 700; }

dt pre > span.Identifier ~ span.Identifier, dt pre > span.Operator ~ span.Identifier {
  color: inherit;
  font-weight: inherit; }

dt pre > span.Operator ~ span.Identifier, dt pre > span.Operator ~ span.Operator {
  color: inherit;
  font-weight: inherit; }

/* Nim sprite for the footer (taken from main page favicon) */
.nim-sprite {
  display: inline-block;
  height: 12px;
  width: 12px;
  background-position: 0 0;
  background-size: 12px 12px;
  -webkit-filter: opacity(50%);
  background-repeat: no-repeat;
  background-image: url("data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA==");
  margin-bottom: -5px; }
</style>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">Nim 编译器用户指南</h1>
    <div class="row">
  <div class="three columns">
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="introduction_toc" href="#introduction">Introduction</a></li>
<li><a class="reference" id="_toc" href="#">编译器的使用</a></li>
<ul class="simple"><li><a class="reference" id="_toc" href="#">命令行参数</a></li>
<li><a class="reference" id="list-of-warnings_toc" href="#list-of-warnings">List of warnings</a></li>
<li><a class="reference" id="verbosity-levels_toc" href="#verbosity-levels">Verbosity levels</a></li>
<li><a class="reference" id="compile-time-symbols_toc" href="#compile-time-symbols">Compile time symbols</a></li>
<li><a class="reference" id="configuration-files_toc" href="#configuration-files">Configuration files</a></li>
<li><a class="reference" id="search-path-handling_toc" href="#search-path-handling">Search path handling</a></li>
<li><a class="reference" id="generated-c-code-directory_toc" href="#generated-c-code-directory">Generated C code directory</a></li>
</ul><li><a class="reference" id="compilation-cache_toc" href="#compilation-cache">Compilation cache</a></li>
<li><a class="reference" id="_toc" href="#">交叉编译</a></li>
<li><a class="reference" id="dll-generation_toc" href="#dll-generation">DLL generation</a></li>
<li><a class="reference" id="additional-compilation-switches_toc" href="#additional-compilation-switches">Additional compilation switches</a></li>
<li><a class="reference" id="additional-features_toc" href="#additional-features">Additional Features</a></li>
<ul class="simple"><li><a class="reference" id="nodecl-pragma_toc" href="#nodecl-pragma">NoDecl pragma</a></li>
<li><a class="reference" id="header-pragma_toc" href="#header-pragma">Header pragma</a></li>
<li><a class="reference" id="incompletestruct-pragma_toc" href="#incompletestruct-pragma">IncompleteStruct pragma</a></li>
<li><a class="reference" id="compile-pragma_toc" href="#compile-pragma">Compile pragma</a></li>
<li><a class="reference" id="link-pragma_toc" href="#link-pragma">Link pragma</a></li>
<li><a class="reference" id="passc-pragma_toc" href="#passc-pragma">PassC pragma</a></li>
<li><a class="reference" id="passl-pragma_toc" href="#passl-pragma">PassL pragma</a></li>
<li><a class="reference" id="emit-pragma_toc" href="#emit-pragma">Emit pragma</a></li>
<li><a class="reference" id="importcpp-pragma_toc" href="#importcpp-pragma">ImportCpp pragma</a></li>
<ul class="simple"><li><a class="reference" id="namespaces_toc" href="#namespaces">Namespaces</a></li>
<li><a class="reference" id="importcpp-for-enums_toc" href="#importcpp-for-enums">Importcpp for enums</a></li>
<li><a class="reference" id="importcpp-for-procs_toc" href="#importcpp-for-procs">Importcpp for procs</a></li>
<li><a class="reference" id="wrapping-destructors_toc" href="#wrapping-destructors">Wrapping destructors</a></li>
<li><a class="reference" id="importcpp-for-objects_toc" href="#importcpp-for-objects">Importcpp for objects</a></li>
</ul><li><a class="reference" id="importobjc-pragma_toc" href="#importobjc-pragma">ImportObjC pragma</a></li>
<li><a class="reference" id="codegendecl-pragma_toc" href="#codegendecl-pragma">CodegenDecl pragma</a></li>
<li><a class="reference" id="injectstmt-pragma_toc" href="#injectstmt-pragma">InjectStmt pragma</a></li>
<li><a class="reference" id="linedir-option_toc" href="#linedir-option">LineDir option</a></li>
<li><a class="reference" id="stacktrace-option_toc" href="#stacktrace-option">StackTrace option</a></li>
<li><a class="reference" id="linetrace-option_toc" href="#linetrace-option">LineTrace option</a></li>
<li><a class="reference" id="debugger-option_toc" href="#debugger-option">Debugger option</a></li>
<li><a class="reference" id="breakpoint-pragma_toc" href="#breakpoint-pragma">Breakpoint pragma</a></li>
<li><a class="reference" id="volatile-pragma_toc" href="#volatile-pragma">Volatile pragma</a></li>
</ul><li><a class="reference" id="dynliboverride_toc" href="#dynliboverride">DynlibOverride</a></li>
<li><a class="reference" id="backend-language-options_toc" href="#backend-language-options">Backend language options</a></li>
<li><a class="reference" id="nim-documentation-tools_toc" href="#nim-documentation-tools">Nim documentation tools</a></li>
<li><a class="reference" id="nim-idetools-integration_toc" href="#nim-idetools-integration">Nim idetools integration</a></li>
<li><a class="reference" id="nim-interactive-mode_toc" href="#nim-interactive-mode">Nim interactive mode</a></li>
<li><a class="reference" id="nim-for-embedded-systems_toc" href="#nim-for-embedded-systems">Nim for embedded systems</a></li>
<li><a class="reference" id="nim-for-realtime-systems_toc" href="#nim-for-realtime-systems">Nim for realtime systems</a></li>
<li><a class="reference" id="debugging-with-nim_toc" href="#debugging-with-nim">Debugging with Nim</a></li>
<li><a class="reference" id="optimizing-for-nim_toc" href="#optimizing-for-nim">Optimizing for Nim</a></li>
<ul class="simple"><li><a class="reference" id="optimizing-string-handling_toc" href="#optimizing-string-handling">Optimizing string handling</a></li>
</ul>
</ul>

  </div>
  <div class="nine columns" id="content">
  <p class="module-desc"><table class="docinfo" frame="void" rules="none"><col class="docinfo-name" /><col class="docinfo-content" /><tbody valign="top"><tr><th class="docinfo-name">作者:</th><td> Andreas Rumpf</td></tr>
<tr><th class="docinfo-name">版本:</th><td> |nimversion|</td></tr>
</tbody></table><blockquote><p>&quot;Look at you, hacker. A pathetic creature of meat and bone, panting and sweating as you run through my corridors. How can you challenge a perfect, immortal machine?&quot;</p></blockquote>

<h1><a class="toc-backref" id="introduction" href="#introduction">Introduction</a></h1><p>本文介绍了 Nim 编译器在不同平台上的使用。它并不是 Nim 编程语言的定义（如果想了解定义请看这篇 <a class="reference external" href="manual.html">指南</a> ）。</p>
<p>Nim 是自由软件，使用 <a class="reference external" href="http://www.opensource.org/licenses/mit-license.php">MIT</a> 协议授权。</p>

<h1><a class="toc-backref" id="" href="#">编译器的使用</a></h1>
<h2><a class="toc-backref" id="" href="#">命令行参数</a></h2><p>基础命令行参数：</p>
<p>用法：</p>
<pre>
nim 命令 [选项] [项目文件] [程序参数]</pre>
<dl class="docutils"><dt>Command:</dt>
<dd><table frame="void"><tr><th align="left">compile, c</th><td align="left">用默认（C）代码生成器编译项目</td>
</tr>
<tr><th align="left">doc</th><td align="left">为输入的文件生成文档</td>
</tr>
<tr><th align="left">doc2</th><td align="left">为所有项目生成文档</td>
</tr>
</table></dd>
<dt>程序参数：</dt>
<dd>程序参数会在程序运行时传递进去（如果启用了 --run 选项的话）</dd>
<dt>选项：</dt>
<dd><table frame="void"><tr><th align="left">-p, --path:PATH</th><td align="left">添加路径到搜索路径中</td>
</tr>
<tr><th align="left">-d, --define:SYMBOL</th><td align="left">定义一个条件标识符</td>
</tr>
<tr><th align="left">-u, --undef:SYMBOL</th><td align="left">取消定义一个条件标识符</td>
</tr>
<tr><th align="left">-f, --forceBuild</th><td align="left">强制重建所有模块</td>
</tr>
<tr><th align="left">--stackTrace:on|off</th><td align="left">开关堆栈跟踪</td>
</tr>
<tr><th align="left">--lineTrace:on|off</th><td align="left">开关轨迹追踪</td>
</tr>
<tr><th align="left">--threads:on|off</th><td align="left">开关多线程支持</td>
</tr>
<tr><th align="left">-x, --checks:on|off</th><td align="left">开关所有运行时检查</td>
</tr>
<tr><th align="left">--objChecks:on|off</th><td align="left">开关对象转换检查</td>
</tr>
<tr><th align="left">--fieldChecks:on|off</th><td align="left">开关实例的变种字段检查</td>
</tr>
<tr><th align="left">--rangeChecks:on|off</th><td align="left">开关范围检查</td>
</tr>
<tr><th align="left">--boundChecks:on|off</th><td align="left">开关边界检查</td>
</tr>
<tr><th align="left">--overflowChecks:on|off</th><td align="left">开关整型的 溢出/下溢 检查</td>
</tr>
<tr><th align="left">-a, --assertions:on|off</th><td align="left">开关断言</td>
</tr>
<tr><th align="left">--floatChecks:on|off</th><td align="left">开关所有浮点（NaN/Inf）检查</td>
</tr>
<tr><th align="left">--nanChecks:on|off</th><td align="left">开关 NaN 检查</td>
</tr>
<tr><th align="left">--infChecks:on|off</th><td align="left">开关 Inf 检查</td>
</tr>
<tr><th align="left">--deadCodeElim:on|off</th><td align="left">开关所有程序的死代码消除</td>
</tr>
<tr><th align="left">--opt:none|speed|size</th><td align="left">优化 无|运行速度|文件体积</td>
</tr>
<tr><th align="left">--debugger:native|endb</th><td align="left">使用 原生调试器（gdb）|ENDB（实验性的）</td>
</tr>
<tr><th align="left">--app:console|gui|lib|staticlib</th><td align="left">生成一个 命令行程序|图形界面程序|DLL|静态库</td>
</tr>
<tr><th align="left">-r, --run</th><td align="left">使用给予的参数运行编译的程序</td>
</tr>
<tr><th align="left">--advanced</th><td align="left">显示高级命令行参数</td>
</tr>
<tr><th align="left">-h, --help</th><td align="left">显示本帮助</td>
</tr>
</table></dd>
</dl>
<p>Note, single letter options that take an argument require a colon. E.g. -p:PATH. </p>
<hr />
<p>高级命令行参数：</p>
<dl class="docutils"><dt>Advanced commands:</dt>
<dd><table frame="void"><tr><th align="left">compileToC, cc</th><td align="left">compile project with C code generator</td>
</tr>
<tr><th align="left">compileToCpp, cpp</th><td align="left">compile project to C++ code</td>
</tr>
<tr><th align="left">compileToOC, objc</th><td align="left">compile project to Objective C code</td>
</tr>
<tr><th align="left">js</th><td align="left">compile project to Javascript</td>
</tr>
<tr><th align="left">rst2html</th><td align="left">convert a reStructuredText file to HTML</td>
</tr>
<tr><th align="left">rst2tex</th><td align="left">convert a reStructuredText file to TeX</td>
</tr>
<tr><th align="left">jsondoc</th><td align="left">extract the documentation to a json file</td>
</tr>
<tr><th align="left">buildIndex</th><td align="left">build an index for the whole documentation</td>
</tr>
<tr><th align="left">run</th><td align="left">run the project (with Tiny C backend; buggy!)</td>
</tr>
<tr><th align="left">genDepend</th><td align="left">generate a DOT file containing the module dependency graph</td>
</tr>
<tr><th align="left">dump</th><td align="left">dump all defined conditionals and search paths</td>
</tr>
<tr><th align="left">check</th><td align="left">checks the project for syntax and semantic</td>
</tr>
<tr><th align="left">idetools</th><td align="left">compiler support for IDEs: possible options:<table frame="void"><tr><th align="left">--track:FILE,LINE,COL</th><td align="left">track a file/cursor position</td>
</tr>
<tr><th align="left">--trackDirty:DIRTY_FILE,ORIG_FILE,LINE,COL</th><td align="left">track a file, currently not saved to disk</td>
</tr>
<tr><th align="left">--suggest</th><td align="left">suggest all possible symbols at position</td>
</tr>
<tr><th align="left">--def</th><td align="left">list all possible definitions at position</td>
</tr>
<tr><th align="left">--context</th><td align="left">list possible invocation context</td>
</tr>
<tr><th align="left">--usages</th><td align="left">list all usages of the symbol at position</td>
</tr>
<tr><th align="left">--eval</th><td align="left">evaluates an expression</td>
</tr>
<tr><th align="left">serve</th><td align="left">start the compiler as a service mode (CAAS)</td>
</tr>
<tr><th align="left">--server.type:TYPE</th><td align="left">either stdin or tcp</td>
</tr>
<tr><th align="left">--server.port:PORT</th><td align="left">port for tcp mode, by default 6000</td>
</tr>
<tr><th align="left">--server.address:HOST</th><td align="left">binds to that address, by default &quot;&quot;</td>
</tr>
</table></td>
</tr>
</table><p>Advanced options:</p>
<table frame="void"><tr><th align="left">-o, --out:FILE</th><td align="left">set the output filename</td>
</tr>
<tr><th align="left">--stdout</th><td align="left">output to stdout</td>
</tr>
<tr><th align="left">--listFullPaths</th><td align="left">list full paths in messages</td>
</tr>
<tr><th align="left">-w, --warnings:on|off</th><td align="left">turn all warnings on|off</td>
</tr>
<tr><th align="left">--warning[X]:on|off</th><td align="left">turn specific warning X on|off</td>
</tr>
<tr><th align="left">--hints:on|off</th><td align="left">turn all hints on|off</td>
</tr>
<tr><th align="left">--hint[X]:on|off</th><td align="left">turn specific hint X on|off</td>
</tr>
<tr><th align="left">--lib:PATH</th><td align="left">set the system library path</td>
</tr>
<tr><th align="left">--import:PATH</th><td align="left">add an automatically imported module</td>
</tr>
<tr><th align="left">--include:PATH</th><td align="left">add an automatically included module</td>
</tr>
<tr><th align="left">--nimcache:PATH</th><td align="left">set the path used for generated files</td>
</tr>
<tr><th align="left">--header:FILE</th><td align="left">the compiler should produce a .h file (FILE is optional)</td>
</tr>
<tr><th align="left">-c, --compileOnly</th><td align="left">compile only; do not assemble or link</td>
</tr>
<tr><th align="left">--noLinking</th><td align="left">compile but do not link</td>
</tr>
<tr><th align="left">--noMain</th><td align="left">do not generate a main procedure</td>
</tr>
<tr><th align="left">--genScript</th><td align="left">generate a compile script (in the 'nimcache' subdirectory named 'compile_$project$scriptext')</td>
</tr>
<tr><th align="left">--os:SYMBOL</th><td align="left">set the target operating system (cross-compilation)</td>
</tr>
<tr><th align="left">--cpu:SYMBOL</th><td align="left">set the target processor (cross-compilation)</td>
</tr>
<tr><th align="left">--debuginfo</th><td align="left">enables debug information</td>
</tr>
<tr><th align="left">-t, --passC:OPTION</th><td align="left">pass an option to the C compiler</td>
</tr>
<tr><th align="left">-l, --passL:OPTION</th><td align="left">pass an option to the linker</td>
</tr>
<tr><th align="left">--cincludes:DIR</th><td align="left">modify the C compiler header search path</td>
</tr>
<tr><th align="left">--clibdir:DIR</th><td align="left">modify the linker library search path</td>
</tr>
<tr><th align="left">--clib:LIBNAME</th><td align="left">link an additional C library (you should omit platform-specific extensions)</td>
</tr>
<tr><th align="left">--genMapping</th><td align="left">generate a mapping file containing (Nim, mangled) identifier pairs</td>
</tr>
<tr><th align="left">--project</th><td align="left">document the whole project (doc2)</td>
</tr>
<tr><th align="left">--docSeeSrcUrl:url</th><td align="left">activate 'see source' for doc and doc2 commands (see doc.item.seesrc in config/nimdoc.cfg)</td>
</tr>
<tr><th align="left">--lineDir:on|off</th><td align="left">generation of #line directive on|off</td>
</tr>
<tr><th align="left">--embedsrc</th><td align="left">embeds the original source code as comments in the generated output</td>
</tr>
<tr><th align="left">--threadanalysis:on|off</th><td align="left">turn thread analysis on|off</td>
</tr>
<tr><th align="left">--tlsEmulation:on|off</th><td align="left">turn thread local storage emulation on|off</td>
</tr>
<tr><th align="left">--taintMode:on|off</th><td align="left">turn taint mode on|off</td>
</tr>
<tr><th align="left">--implicitStatic:on|off</th><td align="left">turn implicit compile time evaluation on|off</td>
</tr>
<tr><th align="left">--patterns:on|off</th><td align="left">turn pattern matching on|off</td>
</tr>
<tr><th align="left">--skipCfg</th><td align="left">do not read the general configuration file</td>
</tr>
<tr><th align="left">--skipUserCfg</th><td align="left">do not read the user's configuration file</td>
</tr>
<tr><th align="left">--skipParentCfg</th><td align="left">do not read the parent dirs' configuration files</td>
</tr>
<tr><th align="left">--skipProjCfg</th><td align="left">do not read the project's configuration file</td>
</tr>
<tr><th align="left">--gc:refc|v2|markAndSweep|boehm|none</th><td align="left">select the GC to use; default is 'refc'</td>
</tr>
<tr><th align="left">--index:on|off</th><td align="left">turn index file generation on|off</td>
</tr>
<tr><th align="left">--putenv:key=value</th><td align="left">set an environment variable</td>
</tr>
<tr><th align="left">--NimblePath:PATH</th><td align="left">add a path for Nimble support</td>
</tr>
<tr><th align="left">--noNimblePath</th><td align="left">deactivate the Nimble path</td>
</tr>
<tr><th align="left">--excludePath:PATH</th><td align="left">exclude a path from the list of search paths</td>
</tr>
<tr><th align="left">--dynlibOverride:SYMBOL</th><td align="left">marks SYMBOL so that dynlib:SYMBOL has no effect and can be statically linked instead; symbol matching is fuzzy so that --dynlibOverride:lua matches dynlib: &quot;liblua.so.3&quot;</td>
</tr>
<tr><th align="left">--listCmd</th><td align="left">list the commands used to execute external programs</td>
</tr>
<tr><th align="left">--parallelBuild:0|1|...</th><td align="left">perform a parallel build value = number of processors (0 for auto-detect)</td>
</tr>
<tr><th align="left">--verbosity:0|1|2|3</th><td align="left">set Nim's verbosity level (1 is default)</td>
</tr>
<tr><th align="left">--experimental</th><td align="left">enable experimental language features</td>
</tr>
<tr><th align="left">-v, --version</th><td align="left">show detailed version information</td>
</tr>
</table></dd>
</dl>

<h2><a class="toc-backref" id="list-of-warnings" href="#list-of-warnings">List of warnings</a></h2><p>Each warning can be activated individually with <tt class="docutils literal"><span class="pre">--warning[NAME]:on|off</span></tt> or in a <tt class="docutils literal"><span class="pre">push</span></tt> pragma.</p>
<table border="1" class="docutils"><tr><th>Name</th><th>Description</th></tr>
<tr><td>CannotOpenFile</td><td>Some file not essential for the compiler's working could not be opened.</td></tr>
<tr><td>OctalEscape</td><td>The code contains an unsupported octal sequence.</td></tr>
<tr><td>Deprecated</td><td>The code uses a deprecated symbol.</td></tr>
<tr><td>ConfigDeprecated</td><td>The project makes use of a deprecated config file.</td></tr>
<tr><td>SmallLshouldNotBeUsed</td><td>The letter 'l' should not be used as an identifier.</td></tr>
<tr><td>EachIdentIsTuple</td><td>The code contains a confusing <tt class="docutils literal"><span class="pre">var</span></tt> declaration.</td></tr>
<tr><td>ShadowIdent</td><td>A local variable shadows another local variable of an outer scope.</td></tr>
<tr><td>User</td><td>Some user defined warning.</td></tr>
</table>
<h2><a class="toc-backref" id="verbosity-levels" href="#verbosity-levels">Verbosity levels</a></h2><table border="1" class="docutils"><tr><th>Level</th><th>Description</th></tr>
<tr><td>0</td><td>Minimal output level for the compiler.</td></tr>
<tr><td>1</td><td>Displays compilation of all the compiled files, including those imported by other modules or through the <a class="reference external" href="#compile-pragma">compile pragma</a>. This is the default level.</td></tr>
<tr><td>2</td><td>Displays compilation statistics, enumerates the dynamic libraries that will be loaded by the final binary and dumps to standard output the result of applying <a class="reference external" href="filters.html">a filter to the source code</a> if any filter was used during compilation.</td></tr>
<tr><td>3</td><td>In addition to the previous levels dumps a debug stack trace for compiler developers.</td></tr>
</table>
<h2><a class="toc-backref" id="compile-time-symbols" href="#compile-time-symbols">Compile time symbols</a></h2><p>Through the <tt class="docutils literal"><span class="pre">-d:x</span></tt> or <tt class="docutils literal"><span class="pre">--define:x</span></tt> switch you can define compile time symbols for conditional compilation. The defined switches can be checked in source code with the <a class="reference external" href="manual.html#when-statement">when statement</a> and <a class="reference external" href="system.html#defined">defined proc</a>. The typical use of this switch is to enable builds in release mode (<tt class="docutils literal"><span class="pre">-d:release</span></tt>) where certain safety checks are omitted for better performance. Another common use is the <tt class="docutils literal"><span class="pre">-d:ssl</span></tt> switch to activate <a class="reference external" href="sockets.html">SSL sockets</a>.</p>

<h2><a class="toc-backref" id="configuration-files" href="#configuration-files">Configuration files</a></h2><p><strong>Note:</strong> The <em>project file name</em> is the name of the <tt class="docutils literal"><span class="pre">.nim</span></tt> file that is passed as a command line argument to the compiler.</p>
<p>The <tt class="docutils literal"><span class="pre">nim</span></tt> executable processes configuration files in the following directories (in this order; later files overwrite previous settings):</p>
<ol class="simple"><li><tt class="docutils literal"><span class="pre">$nim/config/nim.cfg</span></tt>, <tt class="docutils literal"><span class="pre">/etc/nim.cfg</span></tt> (UNIX) or <tt class="docutils literal"><span class="pre">%NIMROD%/config/nim.cfg</span></tt> (Windows). This file can be skipped with the <tt class="docutils literal"><span class="pre">--skipCfg</span></tt> command line option.</li>
<li><tt class="docutils literal"><span class="pre">/home/$user/.config/nim.cfg</span></tt> (UNIX) or  <tt class="docutils literal"><span class="pre">%APPDATA%/nim.cfg</span></tt> (Windows). This file can be skipped with the <tt class="docutils literal"><span class="pre">--skipUserCfg</span></tt> command line option.</li>
<li><tt class="docutils literal"><span class="pre">$parentDir/nim.cfg</span></tt> where <tt class="docutils literal"><span class="pre">$parentDir</span></tt> stands for any parent  directory of the project file's path. These files can be skipped with the <tt class="docutils literal"><span class="pre">--skipParentCfg</span></tt> command line option.</li>
<li><tt class="docutils literal"><span class="pre">$projectDir/nim.cfg</span></tt> where <tt class="docutils literal"><span class="pre">$projectDir</span></tt> stands for the project  file's path. This file can be skipped with the <tt class="docutils literal"><span class="pre">--skipProjCfg</span></tt> command line option.</li>
<li>A project can also have a project specific configuration file named <tt class="docutils literal"><span class="pre">$project.nim.cfg</span></tt> that resides in the same directory as <tt class="docutils literal"><span class="pre">$project.nim</span></tt>. This file can be skipped with the <tt class="docutils literal"><span class="pre">--skipProjCfg</span></tt> command line option.</li>
</ol>
<p>Command line settings have priority over configuration file settings.</p>
<p>The default build of a project is a <span id="debug-build_1">debug build</span>. To compile a <span id="release-build_1">release build</span> define the <tt class="docutils literal"><span class="pre">release</span></tt> symbol:<pre>
nim c -d:release myproject.nim</pre>
</p>

<h2><a class="toc-backref" id="search-path-handling" href="#search-path-handling">Search path handling</a></h2><p>Nim has the concept of a global search path (PATH) that is queried to determine where to find imported modules or include files. If multiple files are found an ambiguity error is produced.</p>
<p><tt class="docutils literal"><span class="pre">nim dump</span></tt> shows the contents of the PATH.</p>
<p>However before the PATH is used the current directory is checked for the file's existence. So if PATH contains <tt class="docutils literal"><span class="pre">$lib</span></tt> and <tt class="docutils literal"><span class="pre">$lib/bar</span></tt> and the directory structure looks like this:<pre>
$lib/x.nim
$lib/bar/x.nim
foo/x.nim
foo/main.nim
other.nim</pre>
</p>
<p>And <tt class="docutils literal"><span class="pre">main</span></tt> imports <tt class="docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">foo/x</span></tt> is imported. If <tt class="docutils literal"><span class="pre">other</span></tt> imports <tt class="docutils literal"><span class="pre">x</span></tt> then both <tt class="docutils literal"><span class="pre">$lib/x.nim</span></tt> and <tt class="docutils literal"><span class="pre">$lib/bar/x.nim</span></tt> match and so the compiler should reject it. Currently however this check is not implemented and instead the first matching file is used.</p>

<h2><a class="toc-backref" id="generated-c-code-directory" href="#generated-c-code-directory">Generated C code directory</a></h2><p>The generated files that Nim produces all go into a subdirectory called <tt class="docutils literal"><span class="pre">nimcache</span></tt> in your project directory. This makes it easy to delete all generated files. Files generated in this directory follow a naming logic which you can read about in the <a class="reference external" href="backends.html#nimcache-naming-logic">Nim Backend Integration document</a>.</p>
<p>However, the generated C code is not platform independent. C code generated for Linux does not compile on Windows, for instance. The comment on top of the C file lists the OS, CPU and CC the file has been compiled for.</p>

<h1><a class="toc-backref" id="compilation-cache" href="#compilation-cache">Compilation cache</a></h1><p><strong>Warning</strong>: The compilation cache is still highly experimental!</p>
<p>The <tt class="docutils literal"><span class="pre">nimcache</span></tt> directory may also contain so called <span id="rod_1">rod</span> or <span id="symbol-files_1">symbol files</span>. These files are pre-compiled modules that are used by the compiler to perform <span id="incremental-compilation_1">incremental compilation</span>. This means that only modules that have changed since the last compilation (or the modules depending on them etc.) are re-compiled. However, per default no symbol files are generated; use the <tt class="docutils literal"><span class="pre">--symbolFiles:on</span></tt> command line switch to activate them.</p>
<p>Unfortunately due to technical reasons the <tt class="docutils literal"><span class="pre">--symbolFiles:on</span></tt> needs to <em>aggregate</em> some generated C code. This means that the resulting executable might contain some cruft even when dead code elimination is turned on. So the final release build should be done with <tt class="docutils literal"><span class="pre">--symbolFiles:off</span></tt>.</p>
<p>Due to the aggregation of C code it is also recommended that each project resides in its own directory so that the generated <tt class="docutils literal"><span class="pre">nimcache</span></tt> directory is not shared between different projects.</p>

<h1><a class="toc-backref" id="" href="#">交叉编译</a></h1><p>一个交叉编译的例子：</p>
<blockquote><p>nim c --cpu:i386 --os:linux --compile_only --gen_script myproject.nim</p></blockquote>
<p>然后将 C 源码和编译脚本 <tt class="docutils literal"><span class="pre">compile_myproject.sh</span></tt> 移动到你的 Linux i386 机器上，运行脚本。</p>
<p>另一种方式是调用交叉编译工具链：</p>
<blockquote><p>nim c --cpu:arm --os:linux myproject.nim</p></blockquote>
<p>Nim 编译器会读取配置文件中名字为 <tt class="docutils literal"><span class="pre">$cpu.$os.$cc</span></tt> 的配置（比如 arm.linux.gcc）来调用对应的 C 编译器。例如 <tt class="docutils literal"><span class="pre">ARM</span></tt> 的配置是这样的：</p>
<blockquote><p>arm.linux.gcc.path = &quot;/usr/bin&quot; arm.linux.gcc.exe = &quot;arm-linux-gcc&quot; arm.linux.gcc.linkerexe = &quot;arm-linux-gcc&quot;</p></blockquote>

<h1><a class="toc-backref" id="dll-generation" href="#dll-generation">DLL generation</a></h1><p>Nim supports the generation of DLLs. However, there must be only one instance of the GC per process/address space. This instance is contained in <tt class="docutils literal"><span class="pre">nimrtl.dll</span></tt>. This means that every generated Nim DLL depends on <tt class="docutils literal"><span class="pre">nimrtl.dll</span></tt>. To generate the &quot;nimrtl.dll&quot; file, use the command:<pre>
nim c -d:release lib/nimrtl.nim</pre>
</p>
<p>To link against <tt class="docutils literal"><span class="pre">nimrtl.dll</span></tt> use the command:<pre>
nim c -d:useNimRtl myprog.nim</pre>
</p>
<p><strong>Note</strong>: Currently the creation of <tt class="docutils literal"><span class="pre">nimrtl.dll</span></tt> with thread support has never been tested and is unlikely to work!</p>

<h1><a class="toc-backref" id="additional-compilation-switches" href="#additional-compilation-switches">Additional compilation switches</a></h1><p>The standard library supports a growing number of <tt class="docutils literal"><span class="pre">useX</span></tt> conditional defines affecting how some features are implemented. This section tries to give a complete list.</p>
<table border="1" class="docutils"><tr><th>Define</th><th>Effect</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">release</span></tt></td><td>Turns off runtime checks and turns on the optimizer.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">useWinAnsi</span></tt></td><td>Modules like <tt class="docutils literal"><span class="pre">os</span></tt> and <tt class="docutils literal"><span class="pre">osproc</span></tt> use the Ansi versions of the Windows API. The default build uses the Unicode version.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">useFork</span></tt></td><td>Makes <tt class="docutils literal"><span class="pre">osproc</span></tt> use <tt class="docutils literal"><span class="pre">fork</span></tt> instead of <tt class="docutils literal"><span class="pre">posix_spawn</span></tt>.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">useNimRtl</span></tt></td><td>Compile and link against <tt class="docutils literal"><span class="pre">nimrtl.dll</span></tt>.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">useMalloc</span></tt></td><td>Makes Nim use C's <span id="malloc_1">malloc</span> instead of Nim's own memory manager. This only works with <tt class="docutils literal"><span class="pre">gc:none</span></tt>.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">useRealtimeGC</span></tt></td><td>Enables support of Nim's GC for <em>soft</em> realtime systems. See the documentation of the <a class="reference external" href="gc.html">gc</a> for further information.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">nodejs</span></tt></td><td>The JS target is actually <tt class="docutils literal"><span class="pre">node.js</span></tt>.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">ssl</span></tt></td><td>Enables OpenSSL support for the sockets module.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">memProfiler</span></tt></td><td>Enables memory profiling for the native GC.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">uClibc</span></tt></td><td>Use uClibc instead of libc. (Relevant for Unix-like OSes)</td></tr>
</table>
<h1><a class="toc-backref" id="additional-features" href="#additional-features">Additional Features</a></h1><p>This section describes Nim's additional features that are not listed in the Nim manual. Some of the features here only make sense for the C code generator and are subject to change.</p>

<h2><a class="toc-backref" id="nodecl-pragma" href="#nodecl-pragma">NoDecl pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">noDecl</span></tt> pragma can be applied to almost any symbol (variable, proc, type, etc.) and is sometimes useful for interoperability with C: It tells Nim that it should not generate a declaration for the symbol in the C code. For example:</p>
<pre><span class="Keyword">var</span>
  <span class="Identifier">EACCES</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importc</span><span class="Punctuation">,</span> <span class="Identifier">noDecl</span><span class="Operator">.</span><span class="Punctuation">}</span><span class="Punctuation">:</span> <span class="Identifier">cint</span> <span class="Comment"># pretend EACCES was a variable, as</span>
                                   <span class="Comment"># Nim does not know its value</span></pre><p>However, the <tt class="docutils literal"><span class="pre">header</span></tt> pragma is often the better alternative.</p>
<p><strong>Note</strong>: This will not work for the LLVM backend.</p>

<h2><a class="toc-backref" id="header-pragma" href="#header-pragma">Header pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">header</span></tt> pragma is very similar to the <tt class="docutils literal"><span class="pre">noDecl</span></tt> pragma: It can be applied to almost any symbol and specifies that it should not be declared and instead the generated code should contain an <tt class="docutils literal"><span class="pre">#include</span></tt>:</p>
<pre><span class="Keyword">type</span>
  <span class="Identifier">PFile</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importc</span><span class="Punctuation">:</span> <span class="StringLit">&quot;FILE*&quot;</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="StringLit">&quot;&lt;stdio.h&gt;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span> <span class="Keyword">distinct</span> <span class="Identifier">pointer</span>
    <span class="Comment"># import C's FILE* type; Nim will treat it as a new pointer type</span></pre><p>The <tt class="docutils literal"><span class="pre">header</span></tt> pragma always expects a string constant. The string contant contains the header file: As usual for C, a system header file is enclosed in angle brackets: <tt class="docutils literal"><span class="pre">&lt;&gt;</span></tt>. If no angle brackets are given, Nim encloses the header file in <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt> in the generated C code.</p>
<p><strong>Note</strong>: This will not work for the LLVM backend.</p>

<h2><a class="toc-backref" id="incompletestruct-pragma" href="#incompletestruct-pragma">IncompleteStruct pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">incompleteStruct</span></tt> pragma tells the compiler to not use the underlying C <tt class="docutils literal"><span class="pre">struct</span></tt> in a <tt class="docutils literal"><span class="pre">sizeof</span></tt> expression:</p>
<pre><span class="Keyword">type</span>
  <span class="Identifier">DIR</span><span class="Operator">*</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importc</span><span class="Punctuation">:</span> <span class="StringLit">&quot;DIR&quot;</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="StringLit">&quot;&lt;dirent.h&gt;&quot;</span><span class="Punctuation">,</span>
         <span class="Identifier">final</span><span class="Punctuation">,</span> <span class="Identifier">pure</span><span class="Punctuation">,</span> <span class="Identifier">incompleteStruct</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span> <span class="Keyword">object</span></pre>
<h2><a class="toc-backref" id="compile-pragma" href="#compile-pragma">Compile pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">compile</span></tt> pragma can be used to compile and link a C/C++ source file with the project:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">compile</span><span class="Punctuation">:</span> <span class="StringLit">&quot;myfile.cpp&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre><p><strong>Note</strong>: Nim computes a CRC checksum and only recompiles the file if it has changed. You can use the <tt class="docutils literal"><span class="pre">-f</span></tt> command line option to force recompilation of the file.</p>

<h2><a class="toc-backref" id="link-pragma" href="#link-pragma">Link pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">link</span></tt> pragma can be used to link an additional file with the project:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">link</span><span class="Punctuation">:</span> <span class="StringLit">&quot;myfile.o&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre>
<h2><a class="toc-backref" id="passc-pragma" href="#passc-pragma">PassC pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">passC</span></tt> pragma can be used to pass additional parameters to the C compiler like you would using the commandline switch <tt class="docutils literal"><span class="pre">--passC</span></tt>:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">passC</span><span class="Punctuation">:</span> <span class="StringLit">&quot;-Wall -Werror&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre><p>Note that you can use <tt class="docutils literal"><span class="pre">gorge</span></tt> from the <a class="reference external" href="system.html">system module</a> to embed parameters from an external command at compile time:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">passC</span><span class="Punctuation">:</span> <span class="Identifier">gorge</span><span class="Punctuation">(</span><span class="StringLit">&quot;pkg-config --cflags sdl&quot;</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Punctuation">}</span></pre>
<h2><a class="toc-backref" id="passl-pragma" href="#passl-pragma">PassL pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">passL</span></tt> pragma can be used to pass additional parameters to the linker like you would using the commandline switch <tt class="docutils literal"><span class="pre">--passL</span></tt>:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">passL</span><span class="Punctuation">:</span> <span class="StringLit">&quot;-lSDLmain -lSDL&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre><p>Note that you can use <tt class="docutils literal"><span class="pre">gorge</span></tt> from the <a class="reference external" href="system.html">system module</a> to embed parameters from an external command at compile time:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">passL</span><span class="Punctuation">:</span> <span class="Identifier">gorge</span><span class="Punctuation">(</span><span class="StringLit">&quot;pkg-config --libs sdl&quot;</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Punctuation">}</span></pre>
<h2><a class="toc-backref" id="emit-pragma" href="#emit-pragma">Emit pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">emit</span></tt> pragma can be used to directly affect the output of the compiler's code generator. So it makes your code unportable to other code generators/backends. Its usage is highly discouraged! However, it can be extremely useful for interfacing with <span id="c_1">C++</span> or <span id="objective-c_1">Objective C</span> code.</p>
<p>Example:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">emit</span><span class="Punctuation">:</span> <span class="LongStringLit">&quot;&quot;&quot;
static int cvariable = 420;
&quot;&quot;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">push</span> <span class="Identifier">stackTrace</span><span class="Punctuation">:</span><span class="Identifier">off</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Keyword">proc</span> <span class="Identifier">embedsC</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Keyword">var</span> <span class="Identifier">nimVar</span> <span class="Operator">=</span> <span class="DecNumber">89</span>
  <span class="Comment"># use backticks to access Nim symbols within an emit section:</span>
  <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">emit</span><span class="Punctuation">:</span> <span class="LongStringLit">&quot;&quot;&quot;fprintf(stdout, &quot;%d\n&quot;, cvariable + (int)`nimVar`);&quot;&quot;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">pop</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Identifier">embedsC</span><span class="Punctuation">(</span><span class="Punctuation">)</span></pre><p>As can be seen from the example, to Nim symbols can be referred via backticks. Use two backticks to produce a single verbatim backtick.</p>

<h2><a class="toc-backref" id="importcpp-pragma" href="#importcpp-pragma">ImportCpp pragma</a></h2><p><strong>Note</strong>: <a class="reference external" href="c2nim.html">c2nim</a> can parse a large subset of C++ and knows about the <tt class="docutils literal"><span class="pre">importcpp</span></tt> pragma pattern language. It is not necessary to know all the details described here.</p>
<p>Similar to the <a class="reference external" href="manual.html#importc-pragma">importc pragma for C</a>, the <tt class="docutils literal"><span class="pre">importcpp</span></tt> pragma can be used to import <span id="c_2">C++</span> methods or C++ symbols in general. The generated code then uses the C++ method calling syntax: <tt class="docutils literal"><span class="pre">obj-&gt;method(arg)</span></tt>.  In combination with the <tt class="docutils literal"><span class="pre">header</span></tt> and <tt class="docutils literal"><span class="pre">emit</span></tt> pragmas this allows <em>sloppy</em> interfacing with libraries written in C++:</p>
<pre><span class="Comment"># Horrible example of how to interface with a C++ engine ... ;-)</span>

<span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">link</span><span class="Punctuation">:</span> <span class="StringLit">&quot;/usr/lib/libIrrlicht.so&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">emit</span><span class="Punctuation">:</span> <span class="LongStringLit">&quot;&quot;&quot;
using namespace irr;
using namespace core;
using namespace scene;
using namespace video;
using namespace io;
using namespace gui;
&quot;&quot;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">const</span>
  <span class="Identifier">irr</span> <span class="Operator">=</span> <span class="StringLit">&quot;&lt;irrlicht/irrlicht.h&gt;&quot;</span>

<span class="Keyword">type</span>
  <span class="Identifier">IrrlichtDeviceObj</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">final</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="Identifier">irr</span><span class="Punctuation">,</span>
                      <span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;IrrlichtDevice&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span> <span class="Keyword">object</span>
  <span class="Identifier">IrrlichtDevice</span> <span class="Operator">=</span> <span class="Keyword">ptr</span> <span class="Identifier">IrrlichtDeviceObj</span>

<span class="Keyword">proc</span> <span class="Identifier">createDevice</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">IrrlichtDevice</span> <span class="Punctuation">{</span><span class="Operator">.</span>
  <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="Identifier">irr</span><span class="Punctuation">,</span> <span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;createDevice(@)&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Keyword">proc</span> <span class="Identifier">run</span><span class="Punctuation">(</span><span class="Identifier">device</span><span class="Punctuation">:</span> <span class="Identifier">IrrlichtDevice</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">bool</span> <span class="Punctuation">{</span><span class="Operator">.</span>
  <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="Identifier">irr</span><span class="Punctuation">,</span> <span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;#.run(@)&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre><p>The compiler needs to be told to generate C++ (command <tt class="docutils literal"><span class="pre">cpp</span></tt>) for this to work. The conditional symbol <tt class="docutils literal"><span class="pre">cpp</span></tt> is defined when the compiler emits C++ code.</p>

<h3><a class="toc-backref" id="namespaces" href="#namespaces">Namespaces</a></h3><p>The <em>sloppy interfacing</em> example uses <tt class="docutils literal"><span class="pre">.emit</span></tt> to produce <tt class="docutils literal"><span class="pre">using namespace</span></tt> declarations. It is usually much better to instead refer to the imported name via the <tt class="docutils literal"><span class="pre">namespace::identifier</span></tt> notation:</p>
<pre><span class="Keyword">type</span>
  <span class="Identifier">IrrlichtDeviceObj</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">final</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="Identifier">irr</span><span class="Punctuation">,</span>
                      <span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;irr::IrrlichtDevice&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span> <span class="Keyword">object</span></pre>
<h3><a class="toc-backref" id="importcpp-for-enums" href="#importcpp-for-enums">Importcpp for enums</a></h3><p>When <tt class="docutils literal"><span class="pre">importcpp</span></tt> is applied to an enum type the numerical enum values are annotated with the C++ enum type, like in this example: <tt class="docutils literal"><span class="pre">((TheCppEnum)(3))</span></tt>. (This turned out to be the simplest way to implement it.)</p>

<h3><a class="toc-backref" id="importcpp-for-procs" href="#importcpp-for-procs">Importcpp for procs</a></h3><p>Note that the <tt class="docutils literal"><span class="pre">importcpp</span></tt> variant for procs uses a somewhat cryptic pattern language for maximum flexibility:</p>
<ul class="simple"><li>A hash <tt class="docutils literal"><span class="pre">#</span></tt> symbol is replaced by the first or next argument.</li>
<li>A dot following the hash <tt class="docutils literal"><span class="pre">#.</span></tt> indicates that the call should use C++'s dot or arrow notation.</li>
<li>An at symbol <tt class="docutils literal"><span class="pre">@</span></tt> is replaced by the remaining arguments, separated by commas.</li>
</ul>
<p>For example:</p>
<pre><span class="Keyword">proc</span> <span class="Identifier">cppMethod</span><span class="Punctuation">(</span><span class="Identifier">this</span><span class="Punctuation">:</span> <span class="Identifier">CppObj</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">,</span> <span class="Identifier">c</span><span class="Punctuation">:</span> <span class="Identifier">cint</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;#.CppMethod(@)&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Keyword">var</span> <span class="Identifier">x</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">CppObj</span>
<span class="Identifier">cppMethod</span><span class="Punctuation">(</span><span class="Identifier">x</span><span class="Punctuation">[</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">3</span><span class="Punctuation">)</span></pre><p>Produces:</p>
<pre><span class="Identifier">x</span><span class="Operator">-&gt;</span><span class="Identifier">CppMethod</span><span class="Punctuation">(</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">3</span><span class="Punctuation">)</span></pre><p>As a special rule to keep backwards compatibility with older versions of the <tt class="docutils literal"><span class="pre">importcpp</span></tt> pragma, if there is no special pattern character (any of <tt class="docutils literal"><span class="pre"># ' @</span></tt>) at all, C++'s dot or arrow notation is assumed, so the above example can also be written as:</p>
<pre><span class="Keyword">proc</span> <span class="Identifier">cppMethod</span><span class="Punctuation">(</span><span class="Identifier">this</span><span class="Punctuation">:</span> <span class="Identifier">CppObj</span><span class="Punctuation">,</span> <span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">,</span> <span class="Identifier">c</span><span class="Punctuation">:</span> <span class="Identifier">cint</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;CppMethod&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre><p>Note that the pattern language naturally also covers C++'s operator overloading capabilities:</p>
<pre><span class="Keyword">proc</span> <span class="Identifier">vectorAddition</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">Vec3</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Vec3</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;# + #&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Keyword">proc</span> <span class="Identifier">dictLookup</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">:</span> <span class="Identifier">Dict</span><span class="Punctuation">,</span> <span class="Identifier">k</span><span class="Punctuation">:</span> <span class="Identifier">Key</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Value</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;#[#]&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre><ul class="simple"><li>An apostrophe <tt class="docutils literal"><span class="pre">'</span></tt> followed by an integer <tt class="docutils literal"><span class="pre">i</span></tt> in the range 0..9 is replaced by the i'th parameter <em>type</em>. The 0th position is the result type. This can be used to pass types to C++ function templates. Between the <tt class="docutils literal"><span class="pre">'</span></tt> and the digit an asterisk can be used to get to the base type of the type. (So it &quot;takes away a star&quot; from the type; <tt class="docutils literal"><span class="pre">T*</span></tt> becomes <tt class="docutils literal"><span class="pre">T</span></tt>.) Two stars can be used to get to the element type of the element type etc.</li>
</ul>
<p>For example:</p>
<pre><span class="Keyword">type</span> <span class="Identifier">Input</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;System::Input&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span> <span class="Keyword">object</span>
<span class="Keyword">proc</span> <span class="Identifier">getSubsystem</span><span class="Operator">*</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;SystemManager::getSubsystem&lt;'*0&gt;()&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">let</span> <span class="Identifier">x</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">Input</span> <span class="Operator">=</span> <span class="Identifier">getSubsystem</span><span class="Punctuation">[</span><span class="Identifier">Input</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span></pre><p>Produces:</p>
<pre><span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">SystemManager</span><span class="Punctuation">:</span><span class="Punctuation">:</span><span class="Identifier">getSubsystem</span><span class="Operator">&lt;</span><span class="Identifier">System</span><span class="Punctuation">:</span><span class="Punctuation">:</span><span class="Identifier">Input</span><span class="Operator">&gt;</span><span class="Punctuation">(</span><span class="Punctuation">)</span></pre><ul class="simple"><li><tt class="docutils literal"><span class="pre">#@</span></tt> is a special case to support a <tt class="docutils literal"><span class="pre">cnew</span></tt> operation. It is required so that the call expression is inlined directly, without going through a temporary location. This is only required to circumvent a limitation of the current code generator.</li>
</ul>
<p>For example C++'s <tt class="docutils literal"><span class="pre">new</span></tt> operator can be &quot;imported&quot; like this:</p>
<pre><span class="Keyword">proc</span> <span class="Identifier">cnew</span><span class="Operator">*</span><span class="Punctuation">[</span><span class="Identifier">T</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">x</span><span class="Punctuation">:</span> <span class="Identifier">T</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">T</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;(new '*0#@)&quot;</span><span class="Punctuation">,</span> <span class="Identifier">nodecl</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Comment"># constructor of 'Foo':</span>
<span class="Keyword">proc</span> <span class="Identifier">constructFoo</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">cint</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">Foo</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;Foo(@)&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">let</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">cnew</span> <span class="Identifier">constructFoo</span><span class="Punctuation">(</span><span class="DecNumber">3</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span></pre><p>Produces:</p>
<pre><span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">new</span> <span class="Identifier">Foo</span><span class="Punctuation">(</span><span class="DecNumber">3</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span></pre><p>However, depending on the use case <tt class="docutils literal"><span class="pre">new Foo</span></tt> can also be wrapped like this instead:</p>
<pre><span class="Keyword">proc</span> <span class="Identifier">newFoo</span><span class="Punctuation">(</span><span class="Identifier">a</span><span class="Punctuation">,</span> <span class="Identifier">b</span><span class="Punctuation">:</span> <span class="Identifier">cint</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Keyword">ptr</span> <span class="Identifier">Foo</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;new Foo(@)&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">let</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">newFoo</span><span class="Punctuation">(</span><span class="DecNumber">3</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">)</span></pre>
<h3><a class="toc-backref" id="wrapping-destructors" href="#wrapping-destructors">Wrapping destructors</a></h3><p>Since Nim generates C++ directly, any destructor is called implicitly by the C++ compiler at the scope exits. This means that often one can get away with not wrapping the destructor at all! However when it needs to be invoked explicitly, it needs to be wrapped. But the pattern language already provides everything that is required for that:</p>
<pre><span class="Keyword">proc</span> <span class="Identifier">destroyFoo</span><span class="Punctuation">(</span><span class="Identifier">this</span><span class="Punctuation">:</span> <span class="Keyword">var</span> <span class="Identifier">Foo</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;#.~Foo()&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span></pre>
<h3><a class="toc-backref" id="importcpp-for-objects" href="#importcpp-for-objects">Importcpp for objects</a></h3><p>Generic <tt class="docutils literal"><span class="pre">importcpp</span></tt>'ed objects are mapped to C++ templates. This means that you can import C++'s templates rather easily without the need for a pattern language for object types:</p>
<pre><span class="Keyword">type</span>
  <span class="Identifier">StdMap</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;std::map&quot;</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="StringLit">&quot;&lt;map&gt;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Punctuation">[</span><span class="Identifier">K</span><span class="Punctuation">,</span> <span class="Identifier">V</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Keyword">object</span>
<span class="Keyword">proc</span> <span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Punctuation">]</span><span class="Operator">=</span><span class="Punctuation">`</span><span class="Punctuation">[</span><span class="Identifier">K</span><span class="Punctuation">,</span> <span class="Identifier">V</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Identifier">this</span><span class="Punctuation">:</span> <span class="Keyword">var</span> <span class="Identifier">StdMap</span><span class="Punctuation">[</span><span class="Identifier">K</span><span class="Punctuation">,</span> <span class="Identifier">V</span><span class="Punctuation">]</span><span class="Punctuation">;</span> <span class="Identifier">key</span><span class="Punctuation">:</span> <span class="Identifier">K</span><span class="Punctuation">;</span> <span class="Identifier">val</span><span class="Punctuation">:</span> <span class="Identifier">V</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span>
  <span class="Identifier">importcpp</span><span class="Punctuation">:</span> <span class="StringLit">&quot;#[#] = #&quot;</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="StringLit">&quot;&lt;map&gt;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">var</span> <span class="Identifier">x</span><span class="Punctuation">:</span> <span class="Identifier">StdMap</span><span class="Punctuation">[</span><span class="Identifier">cint</span><span class="Punctuation">,</span> <span class="Identifier">cdouble</span><span class="Punctuation">]</span>
<span class="Identifier">x</span><span class="Punctuation">[</span><span class="DecNumber">6</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="FloatNumber">91.4</span></pre><p>Produces:</p>
<pre><span class="Identifier">std</span><span class="Punctuation">:</span><span class="Punctuation">:</span><span class="Identifier">map</span><span class="Operator">&lt;</span><span class="Keyword">int</span><span class="Punctuation">,</span> <span class="Keyword">double</span><span class="Operator">&gt;</span> <span class="Identifier">x</span><span class="Punctuation">;</span>
<span class="Identifier">x</span><span class="Punctuation">[</span><span class="DecNumber">6</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="FloatNumber">91.4</span><span class="Punctuation">;</span></pre>
<h2><a class="toc-backref" id="importobjc-pragma" href="#importobjc-pragma">ImportObjC pragma</a></h2><p>Similar to the <a class="reference external" href="manual.html#importc-pragma">importc pragma for C</a>, the <tt class="docutils literal"><span class="pre">importobjc</span></tt> pragma can be used to import <span id="objective-c_2">Objective C</span> methods.  The generated code then uses the Objective C method calling syntax: <tt class="docutils literal"><span class="pre">[obj method param1: arg]</span></tt>.  In addition with the <tt class="docutils literal"><span class="pre">header</span></tt> and <tt class="docutils literal"><span class="pre">emit</span></tt> pragmas this allows <em>sloppy</em> interfacing with libraries written in Objective C:</p>
<pre><span class="Comment"># horrible example of how to interface with GNUStep ...</span>

<span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">passL</span><span class="Punctuation">:</span> <span class="StringLit">&quot;-lobjc&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">emit</span><span class="Punctuation">:</span> <span class="LongStringLit">&quot;&quot;&quot;
#include &lt;objc/Object.h&gt;
@interface Greeter:Object
{
}

- (void)greet:(long)x y:(long)dummy;
@end

#include &lt;stdio.h&gt;
@implementation Greeter

- (void)greet:(long)x y:(long)dummy
{
        printf(&quot;Hello, World!\n&quot;);
}
@end

#include &lt;stdlib.h&gt;
&quot;&quot;&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">type</span>
  <span class="Identifier">Id</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importc</span><span class="Punctuation">:</span> <span class="StringLit">&quot;id&quot;</span><span class="Punctuation">,</span> <span class="Identifier">header</span><span class="Punctuation">:</span> <span class="StringLit">&quot;&lt;objc/Object.h&gt;&quot;</span><span class="Punctuation">,</span> <span class="Identifier">final</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span>

<span class="Keyword">proc</span> <span class="Identifier">newGreeter</span><span class="Punctuation">:</span> <span class="Identifier">Id</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importobjc</span><span class="Punctuation">:</span> <span class="StringLit">&quot;Greeter new&quot;</span><span class="Punctuation">,</span> <span class="Identifier">nodecl</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Keyword">proc</span> <span class="Identifier">greet</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">Id</span><span class="Punctuation">,</span> <span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">:</span> <span class="Identifier">int</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importobjc</span><span class="Punctuation">:</span> <span class="StringLit">&quot;greet&quot;</span><span class="Punctuation">,</span> <span class="Identifier">nodecl</span><span class="Operator">.</span><span class="Punctuation">}</span>
<span class="Keyword">proc</span> <span class="Identifier">free</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">Id</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">importobjc</span><span class="Punctuation">:</span> <span class="StringLit">&quot;free&quot;</span><span class="Punctuation">,</span> <span class="Identifier">nodecl</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Keyword">var</span> <span class="Identifier">g</span> <span class="Operator">=</span> <span class="Identifier">newGreeter</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
<span class="Identifier">g</span><span class="Operator">.</span><span class="Identifier">greet</span><span class="Punctuation">(</span><span class="DecNumber">12</span><span class="Punctuation">,</span> <span class="DecNumber">34</span><span class="Punctuation">)</span>
<span class="Identifier">g</span><span class="Operator">.</span><span class="Identifier">free</span><span class="Punctuation">(</span><span class="Punctuation">)</span></pre><p>The compiler needs to be told to generate Objective C (command <tt class="docutils literal"><span class="pre">objc</span></tt>) for this to work. The conditional symbol <tt class="docutils literal"><span class="pre">objc</span></tt> is defined when the compiler emits Objective C code.</p>

<h2><a class="toc-backref" id="codegendecl-pragma" href="#codegendecl-pragma">CodegenDecl pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">codegenDecl</span></tt> pragma can be used to directly influence Nim's code generator. It receives a format string that determines how the variable or proc is declared in the generated code:</p>
<pre><span class="Keyword">var</span>
  <span class="Identifier">a</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">codegenDecl</span><span class="Punctuation">:</span> <span class="StringLit">&quot;$# progmem $#&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span><span class="Punctuation">:</span> <span class="Identifier">int</span>

<span class="Keyword">proc</span> <span class="Identifier">myinterrupt</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">codegenDecl</span><span class="Punctuation">:</span> <span class="StringLit">&quot;__interrupt $# $#$#&quot;</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span>
  <span class="Identifier">echo</span> <span class="StringLit">&quot;realistic interrupt handler&quot;</span></pre>
<h2><a class="toc-backref" id="injectstmt-pragma" href="#injectstmt-pragma">InjectStmt pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">injectStmt</span></tt> pragma can be used to inject a statement before every other statement in the current module. It is only supposed to be used for debugging:</p>
<pre><span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">injectStmt</span><span class="Punctuation">:</span> <span class="Identifier">gcInvariants</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Punctuation">}</span>

<span class="Comment"># ... complex code here that produces crashes ...</span></pre>
<h2><a class="toc-backref" id="linedir-option" href="#linedir-option">LineDir option</a></h2><p>The <tt class="docutils literal"><span class="pre">lineDir</span></tt> option can be turned on or off. If turned on the generated C code contains <tt class="docutils literal"><span class="pre">#line</span></tt> directives. This may be helpful for debugging with GDB.</p>

<h2><a class="toc-backref" id="stacktrace-option" href="#stacktrace-option">StackTrace option</a></h2><p>If the <tt class="docutils literal"><span class="pre">stackTrace</span></tt> option is turned on, the generated C contains code to ensure that proper stack traces are given if the program crashes or an uncaught exception is raised.</p>

<h2><a class="toc-backref" id="linetrace-option" href="#linetrace-option">LineTrace option</a></h2><p>The <tt class="docutils literal"><span class="pre">lineTrace</span></tt> option implies the <tt class="docutils literal"><span class="pre">stackTrace</span></tt> option. If turned on, the generated C contains code to ensure that proper stack traces with line number information are given if the program crashes or an uncaught exception is raised.</p>

<h2><a class="toc-backref" id="debugger-option" href="#debugger-option">Debugger option</a></h2><p>The <tt class="docutils literal"><span class="pre">debugger</span></tt> option enables or disables the <em>Embedded Nim Debugger</em>. See the documentation of <a class="reference external" href="endb.html">endb</a> for further information.</p>

<h2><a class="toc-backref" id="breakpoint-pragma" href="#breakpoint-pragma">Breakpoint pragma</a></h2><p>The <em>breakpoint</em> pragma was specially added for the sake of debugging with ENDB. See the documentation of <a class="reference external" href="endb.html">endb</a> for further information.</p>

<h2><a class="toc-backref" id="volatile-pragma" href="#volatile-pragma">Volatile pragma</a></h2><p>The <tt class="docutils literal"><span class="pre">volatile</span></tt> pragma is for variables only. It declares the variable as <tt class="docutils literal"><span class="pre">volatile</span></tt>, whatever that means in C/C++ (its semantics are not well defined in C/C++).</p>
<p><strong>Note</strong>: This pragma will not exist for the LLVM backend.</p>

<h1><a class="toc-backref" id="dynliboverride" href="#dynliboverride">DynlibOverride</a></h1><p>By default Nim's <tt class="docutils literal"><span class="pre">dynlib</span></tt> pragma causes the compiler to generate <tt class="docutils literal"><span class="pre">GetProcAddress</span></tt> (or their Unix counterparts) calls to bind to a DLL. With the <tt class="docutils literal"><span class="pre">dynlibOverride</span></tt> command line switch this can be prevented and then via <tt class="docutils literal"><span class="pre">--passL</span></tt> the static library can be linked against. For instance, to link statically against Lua this command might work on Linux:<pre>
nim c --dynlibOverride:lua --passL:liblua.lib program.nim</pre>
</p>

<h1><a class="toc-backref" id="backend-language-options" href="#backend-language-options">Backend language options</a></h1><p>The typical compiler usage involves using the <tt class="docutils literal"><span class="pre">compile</span></tt> or <tt class="docutils literal"><span class="pre">c</span></tt> command to transform a <tt class="docutils literal"><span class="pre">.nim</span></tt> file into one or more <tt class="docutils literal"><span class="pre">.c</span></tt> files which are then compiled with the platform's C compiler into a static binary. However there are other commands to compile to C++, Objective-C or Javascript. More details can be read in the <a class="reference external" href="backends.html">Nim Backend Integration document</a>.</p>

<h1><a class="toc-backref" id="nim-documentation-tools" href="#nim-documentation-tools">Nim documentation tools</a></h1><p>Nim provides the <span id="doc_1">doc</span> and <span id="doc2_1">doc2</span> commands to generate HTML documentation from <tt class="docutils literal"><span class="pre">.nim</span></tt> source files. Only exported symbols will appear in the output. For more details <a class="reference external" href="docgen.html">see the docgen documentation</a>.</p>

<h1><a class="toc-backref" id="nim-idetools-integration" href="#nim-idetools-integration">Nim idetools integration</a></h1><p>Nim provides language integration with external IDEs through the idetools command. See the documentation of <a class="reference external" href="idetools.html">idetools</a> for further information.</p>

<h1><a class="toc-backref" id="nim-interactive-mode" href="#nim-interactive-mode">Nim interactive mode</a></h1><p>The Nim compiler supports an interactive mode. This is also known as a <span id="repl_1">REPL</span> (<em>read eval print loop</em>). If Nim has been built with the <tt class="docutils literal"><span class="pre">-d:useGnuReadline</span></tt> switch, it uses the GNU readline library for terminal input management. To start Nim in interactive mode use the command <tt class="docutils literal"><span class="pre">nim i</span></tt>. To quit use the <tt class="docutils literal"><span class="pre">quit()</span></tt> command. To determine whether an input line is an incomplete statement to be continued these rules are used:</p>
<ol class="simple"><li>The line ends with <tt class="docutils literal"><span class="pre">[-+*/\\&lt;&gt;!\?\|%&amp;$@~,;:=#^]\s*$</span></tt> (operator symbol followed by optional whitespace).</li>
<li>The line starts with a space (indentation).</li>
<li>The line is within a triple quoted string literal. However, the detection does not work if the line contains more than one <tt class="docutils literal"><span class="pre">&quot;&quot;&quot;</span></tt>.</li>
</ol>

<h1><a class="toc-backref" id="nim-for-embedded-systems" href="#nim-for-embedded-systems">Nim for embedded systems</a></h1><p>The standard library can be avoided to a point where C code generation for 16bit micro controllers is feasible. Use the <span id="standalone_1">standalone</span> target (<tt class="docutils literal"><span class="pre">--os:standalone</span></tt>) for a bare bones standard library that lacks any OS features.</p>
<p>To make the compiler output code for a 16bit target use the <tt class="docutils literal"><span class="pre">--cpu:avr</span></tt> target.</p>
<p>For example, to generate code for an <span id="avr_1">AVR</span> processor use this command:<pre>
nim c --cpu:avr --os:standalone --deadCodeElim:on --genScript x.nim</pre>
</p>
<p>For the <tt class="docutils literal"><span class="pre">standalone</span></tt> target one needs to provide a file <tt class="docutils literal"><span class="pre">panicoverride.nim</span></tt>. See <tt class="docutils literal"><span class="pre">tests/manyloc/standalone/panicoverride.nim</span></tt> for an example implementation.</p>

<h1><a class="toc-backref" id="nim-for-realtime-systems" href="#nim-for-realtime-systems">Nim for realtime systems</a></h1><p>See the documentation of Nim's soft realtime <a class="reference external" href="gc.html">GC</a> for further information.</p>

<h1><a class="toc-backref" id="debugging-with-nim" href="#debugging-with-nim">Debugging with Nim</a></h1><p>Nim comes with its own <em>Embedded Nim Debugger</em>. See the documentation of <a class="reference external" href="endb.html">endb</a> for further information.</p>

<h1><a class="toc-backref" id="optimizing-for-nim" href="#optimizing-for-nim">Optimizing for Nim</a></h1><p>Nim has no separate optimizer, but the C code that is produced is very efficient. Most C compilers have excellent optimizers, so usually it is not needed to optimize one's code. Nim has been designed to encourage efficient code: The most readable code in Nim is often the most efficient too.</p>
<p>However, sometimes one has to optimize. Do it in the following order:</p>
<ol class="simple"><li>switch off the embedded debugger (it is <strong>slow</strong>!)</li>
<li>turn on the optimizer and turn off runtime checks</li>
<li>profile your code to find where the bottlenecks are</li>
<li>try to find a better algorithm</li>
<li>do low-level optimizations</li>
</ol>
<p>This section can only help you with the last item.</p>

<h2><a class="toc-backref" id="optimizing-string-handling" href="#optimizing-string-handling">Optimizing string handling</a></h2><p>String assignments are sometimes expensive in Nim: They are required to copy the whole string. However, the compiler is often smart enough to not copy strings. Due to the argument passing semantics, strings are never copied when passed to subroutines. The compiler does not copy strings that are a result from a procedure call, because the callee returns a new string anyway. Thus it is efficient to do:</p>
<pre><span class="Keyword">var</span> <span class="Identifier">s</span> <span class="Operator">=</span> <span class="Identifier">procA</span><span class="Punctuation">(</span><span class="Punctuation">)</span> <span class="Comment"># assignment will not copy the string; procA allocates a new</span>
                <span class="Comment"># string already</span></pre><p>However it is not efficient to do:</p>
<pre><span class="Keyword">var</span> <span class="Identifier">s</span> <span class="Operator">=</span> <span class="Identifier">varA</span>    <span class="Comment"># assignment has to copy the whole string into a new buffer!</span></pre><p>For <tt class="docutils literal"><span class="pre">let</span></tt> symbols a copy is not always necessary:</p>
<pre><span class="Keyword">let</span> <span class="Identifier">s</span> <span class="Operator">=</span> <span class="Identifier">varA</span>    <span class="Comment"># may only copy a pointer if it safe to do so</span></pre><p>If you know what you're doing, you can also mark single string (or sequence) objects as <span id="shallow_1">shallow</span>:</p>
<pre><span class="Keyword">var</span> <span class="Identifier">s</span> <span class="Operator">=</span> <span class="StringLit">&quot;abc&quot;</span>
<span class="Identifier">shallow</span><span class="Punctuation">(</span><span class="Identifier">s</span><span class="Punctuation">)</span> <span class="Comment"># mark 's' as shallow string</span>
<span class="Keyword">var</span> <span class="Identifier">x</span> <span class="Operator">=</span> <span class="Identifier">s</span>  <span class="Comment"># now might not copy the string!</span></pre><p>Usage of <tt class="docutils literal"><span class="pre">shallow</span></tt> is always safe once you know the string won't be modified anymore, similar to Ruby's <span id="freeze_1">freeze</span>.</p>
<p>The compiler optimizes string case statements: A hashing scheme is used for them if several different string constants are used. So code like this is reasonably efficient:</p>
<pre><span class="Keyword">case</span> <span class="Identifier">normalize</span><span class="Punctuation">(</span><span class="Identifier">k</span><span class="Operator">.</span><span class="Identifier">key</span><span class="Punctuation">)</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;name&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">name</span> <span class="Operator">=</span> <span class="Identifier">v</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;displayname&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">displayName</span> <span class="Operator">=</span> <span class="Identifier">v</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;version&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">version</span> <span class="Operator">=</span> <span class="Identifier">v</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;os&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">oses</span> <span class="Operator">=</span> <span class="Identifier">split</span><span class="Punctuation">(</span><span class="Identifier">v</span><span class="Punctuation">,</span> <span class="Punctuation">{</span><span class="CharLit">';'</span><span class="Punctuation">}</span><span class="Punctuation">)</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;cpu&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">cpus</span> <span class="Operator">=</span> <span class="Identifier">split</span><span class="Punctuation">(</span><span class="Identifier">v</span><span class="Punctuation">,</span> <span class="Punctuation">{</span><span class="CharLit">';'</span><span class="Punctuation">}</span><span class="Punctuation">)</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;authors&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">authors</span> <span class="Operator">=</span> <span class="Identifier">split</span><span class="Punctuation">(</span><span class="Identifier">v</span><span class="Punctuation">,</span> <span class="Punctuation">{</span><span class="CharLit">';'</span><span class="Punctuation">}</span><span class="Punctuation">)</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;description&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">description</span> <span class="Operator">=</span> <span class="Identifier">v</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;app&quot;</span><span class="Punctuation">:</span>
  <span class="Keyword">case</span> <span class="Identifier">normalize</span><span class="Punctuation">(</span><span class="Identifier">v</span><span class="Punctuation">)</span>
  <span class="Keyword">of</span> <span class="StringLit">&quot;console&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">app</span> <span class="Operator">=</span> <span class="Identifier">appConsole</span>
  <span class="Keyword">of</span> <span class="StringLit">&quot;gui&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">app</span> <span class="Operator">=</span> <span class="Identifier">appGUI</span>
  <span class="Keyword">else</span><span class="Punctuation">:</span> <span class="Identifier">quit</span><span class="Punctuation">(</span><span class="Identifier">errorStr</span><span class="Punctuation">(</span><span class="Identifier">p</span><span class="Punctuation">,</span> <span class="StringLit">&quot;expected: console or gui&quot;</span><span class="Punctuation">)</span><span class="Punctuation">)</span>
<span class="Keyword">of</span> <span class="StringLit">&quot;license&quot;</span><span class="Punctuation">:</span> <span class="Identifier">c</span><span class="Operator">.</span><span class="Identifier">license</span> <span class="Operator">=</span> <span class="Identifier">UnixToNativePath</span><span class="Punctuation">(</span><span class="Identifier">k</span><span class="Operator">.</span><span class="Identifier">value</span><span class="Punctuation">)</span>
<span class="Keyword">else</span><span class="Punctuation">:</span> <span class="Identifier">quit</span><span class="Punctuation">(</span><span class="Identifier">errorStr</span><span class="Punctuation">(</span><span class="Identifier">p</span><span class="Punctuation">,</span> <span class="StringLit">&quot;unknown variable: &quot;</span> <span class="Operator">&amp;</span> <span class="Identifier">k</span><span class="Operator">.</span><span class="Identifier">key</span><span class="Punctuation">)</span><span class="Punctuation">)</span></pre></p>
  
  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br>
        <small>Made with Nim. Generated: 2015-03-13 21:16:09 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
